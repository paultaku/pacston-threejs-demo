<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pacston 3D Logo</title>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>M</text></svg>"
    />
    <link rel="stylesheet" href="css/styles.css" />

    <!-- Import map feature detection -->
    <script>
      if (
        !HTMLScriptElement.supports ||
        !HTMLScriptElement.supports("importmap")
      ) {
        document.addEventListener("DOMContentLoaded", function () {
          document.getElementById("fallback").style.display = "flex";
          var canvas = document.getElementById("three-canvas");
          if (canvas) canvas.style.display = "none";
          var loading = document.getElementById("loading");
          if (loading) loading.style.display = "none";
        });
      }
    </script>

    <script type="importmap">
      {
        "imports": {
          "three": "https://cdn.jsdelivr.net/npm/three@0.182.0/build/three.module.js",
          "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.182.0/examples/jsm/"
        }
      }
    </script>
  </head>
  <body>
    <canvas
      id="three-canvas"
      role="img"
      aria-label="Interactive 3D rotating M logo"
    ></canvas>

    <div id="scene-toggle" class="scene-toggle">
      <button class="scene-btn active" data-scene="text" title="Text Scene">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
          <text x="3" y="13" font-size="13" font-weight="bold" fill="currentColor">T</text>
        </svg>
      </button>
      <button class="scene-btn" data-scene="model" title="3D Model Scene">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
          <polygon points="8,1 15,5 15,11 8,15 1,11 1,5" stroke="currentColor" stroke-width="1.5" fill="none"/>
          <line x1="8" y1="1" x2="8" y2="15" stroke="currentColor" stroke-width="1"/>
          <line x1="1" y1="5" x2="15" y2="5" stroke="currentColor" stroke-width="1"/>
        </svg>
      </button>
    </div>

    <div id="text-input-container" class="text-input-container">
      <input
        type="text"
        id="text-input"
        class="text-input"
        value="M"
        placeholder="Type here..."
        autocomplete="off"
        spellcheck="false"
      />
    </div>

    <div id="sidebar" class="sidebar">
      <div class="sidebar-tabs">
        <button class="sidebar-tab active" data-panel="color" title="Color">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
            <circle
              cx="8"
              cy="8"
              r="6"
              stroke="currentColor"
              stroke-width="1.5"
            />
            <circle cx="8" cy="8" r="3" fill="currentColor" />
          </svg>
        </button>
        <button class="sidebar-tab" data-panel="texture" title="Texture">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
            <rect
              x="2"
              y="2"
              width="12"
              height="12"
              rx="2"
              stroke="currentColor"
              stroke-width="1.5"
            />
            <line
              x1="2"
              y1="8"
              x2="14"
              y2="8"
              stroke="currentColor"
              stroke-width="1"
            />
            <line
              x1="8"
              y1="2"
              x2="8"
              y2="14"
              stroke="currentColor"
              stroke-width="1"
            />
          </svg>
        </button>
      </div>
      <div class="sidebar-panel" id="color-panel">
        <div
          class="color-swatch active"
          data-color="#1a5276"
          style="background: #1a5276"
          title="Ocean Blue"
        ></div>
        <div
          class="color-swatch"
          data-color="#6c3483"
          style="background: #6c3483"
          title="Purple"
        ></div>
        <div
          class="color-swatch"
          data-color="#922b21"
          style="background: #922b21"
          title="Crimson"
        ></div>
        <div
          class="color-swatch"
          data-color="#b7950b"
          style="background: #b7950b"
          title="Gold"
        ></div>
        <div
          class="color-swatch"
          data-color="#1e8449"
          style="background: #1e8449"
          title="Emerald"
        ></div>
        <div
          class="color-swatch"
          data-color="#ca6f1e"
          style="background: #ca6f1e"
          title="Amber"
        ></div>
        <div
          class="color-swatch"
          data-color="#148f77"
          style="background: #148f77"
          title="Teal"
        ></div>
        <div
          class="color-swatch"
          data-color="#c2185b"
          style="background: #c2185b"
          title="Pink"
        ></div>
      </div>
      <div class="sidebar-panel hidden" id="texture-panel">
        <div
          class="texture-option active"
          data-texture="metallic"
          title="Metallic"
        >
          <div
            class="texture-preview"
            style="background: linear-gradient(135deg, #3a7bd5, #6cb4ee)"
          ></div>
          <span>Metal</span>
        </div>
        <div class="texture-option" data-texture="matte" title="Matte">
          <div class="texture-preview" style="background: #5a7a9a"></div>
          <span>Matte</span>
        </div>
        <div class="texture-option" data-texture="chrome" title="Chrome">
          <div
            class="texture-preview"
            style="background: linear-gradient(135deg, #e8e8e8, #888, #e8e8e8)"
          ></div>
          <span>Chrome</span>
        </div>
        <div class="texture-option" data-texture="neon" title="Neon Glow">
          <div
            class="texture-preview"
            style="background: radial-gradient(circle, #4fc3f7, #0a2a3f)"
          ></div>
          <span>Neon</span>
        </div>
        <div class="texture-option" data-texture="glass" title="Glass">
          <div
            class="texture-preview"
            style="
              background: linear-gradient(
                135deg,
                rgba(255, 255, 255, 0.3),
                rgba(255, 255, 255, 0.05)
              );
              border: 1px solid rgba(255, 255, 255, 0.2);
            "
          ></div>
          <span>Glass</span>
        </div>
        <div class="texture-option" data-texture="plastic" title="Plastic">
          <div
            class="texture-preview"
            style="background: linear-gradient(160deg, #5b9bd5, #3a6fa0)"
          ></div>
          <span>Plastic</span>
        </div>
        <div class="texture-option" data-texture="wireframe" title="Wireframe">
          <div class="texture-preview wireframe-preview"></div>
          <span>Wire</span>
        </div>
        <div class="texture-option" data-texture="wood" title="Wood">
          <div
            class="texture-preview"
            style="
              background: linear-gradient(160deg, #8b6914, #d2a84b, #6b4e11);
            "
          ></div>
          <span>Wood</span>
        </div>
        <div class="texture-option" data-texture="marble" title="Marble">
          <div
            class="texture-preview"
            style="
              background: linear-gradient(135deg, #e8e5e0, #c4bfb6, #f0ede8);
            "
          ></div>
          <span>Marble</span>
        </div>
        <div class="texture-option" data-texture="brick" title="Brick">
          <div
            class="texture-preview"
            style="
              background: linear-gradient(160deg, #8b3a3a, #a0522d, #6b2d2d);
            "
          ></div>
          <span>Brick</span>
        </div>
        <div class="texture-option" data-texture="stone" title="Stone">
          <div
            class="texture-preview"
            style="
              background: linear-gradient(135deg, #808080, #a0a0a0, #696969);
            "
          ></div>
          <span>Stone</span>
        </div>
      </div>
    </div>

    <div id="loading" class="loading-overlay">
      <div class="loading-content">
        <span class="loading-letter">M</span>
        <p class="loading-text">Loading...</p>
      </div>
    </div>

    <div id="fallback" class="fallback-message">
      <div class="fallback-content">
        <span class="fallback-letter">M</span>
        <p>Your browser does not support WebGL.</p>
        <p>
          Please use a modern browser (Chrome 89+, Firefox 108+, Safari 16.4+).
        </p>
      </div>
    </div>

    <script type="module" src="js/main.js"></script>
  </body>
</html>
